<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ruscha Indexing</title>
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
    <style>
    	html { height: 100%; min-height: 100%; }
    	body { margin: 0; padding: 0; height: 100%; min-height: 100%; }
    	#map { width: 100%; height: 80%; background-color: black; cursor: pointer; }
    	#info { padding: 20px; font-family: 'Helvetica Neue','Helvetica',sans-serif; font-size: 1.6em; }
    	#index-text { font-weight: bold; border: 2px solid #ffc367; padding: 3px 5px; font-size: 1.3em; }
    </style>
  </head>
  <body>

  	<div id="map"></div>
  	<div id="info">Index <input type="text" id="index-text" value="0"> <button id="copy">Copy to Clipboard</button></div>
  
  <script src="https://unpkg.com/jquery@3.4.1/dist/jquery.js"></script>
  <script src="https://npmcdn.com/@turf/turf/turf.min.js"></script>
   <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>

   <script>
   	var map = L.map("map").fitBounds([[34.0852695162,-118.390798057],[34.1047446638,-118.2852263102,]]);

   	var basemap =  L.tileLayer('https://api.maptiler.com/maps/basic/{z}/{x}/{y}.png?key=Tth2viuZXT54gsj6plPV',{
        tileSize: 512, 
        zoomOffset: -1,
        minZoom: 1,
        attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a>',
        crossOrigin: true
      }).addTo(map);


   	var sunset = [[ -118.392298000351204, 34.090472998862033 ], [ -118.392069001281897, 34.090585998770521 ], [ -118.391937001514165, 34.090607999328853 ], [ -118.391426000858601, 34.090620998548793 ], [ -118.391042000706761, 34.090617998781354 ], [ -118.390394001733682, 34.090604999591115 ], [ -118.389750001306382, 34.09061899965581 ], [ -118.389168001217016, 34.090624999453041 ], [ -118.388553001512079, 34.090635998652708 ], [ -118.388070001623902, 34.090630999038126 ], [ -118.387628000561094, 34.090642999397687 ], [ -118.386654000799936, 34.090639998975533 ], [ -118.386559000687654, 34.09064099939669 ], [ -118.385973000638899, 34.090643998459093 ], [ -118.385512000969356, 34.090639998844296 ], [ -118.384433000634004, 34.090633999414834 ], [ -118.383678001204842, 34.090642999293891 ], [ -118.38329500112529, 34.090728998629345 ], [ -118.38310047307175, 34.09082240884117 ], [ -118.382981473161962, 34.090885408004425 ], [ -118.382832635252669, 34.090981092836628 ], [ -118.382496791949606, 34.091218833782996 ], [ -118.382243983195764, 34.091358936974373 ], [ -118.381972699420544, 34.091471426801235 ], [ -118.38166534948806, 34.091593166476123 ], [ -118.381373617391262, 34.091677457399001 ], [ -118.381072247955004, 34.09178081782197 ], [ -118.380490248074764, 34.09200281915345 ], [ -118.379567000522556, 34.092425998851127 ], [ -118.378968631476184, 34.092721637269563 ], [ -118.378875832262551, 34.092748730082839 ], [ -118.378286001861426, 34.093120998424297 ], [ -118.377743000621379, 34.093479999378992 ], [ -118.376396000467153, 34.094342999412682 ], [ -118.376329818977084, 34.094372809916756 ], [ -118.376285000381628, 34.094392999481045 ], [ -118.376257001483381, 34.094402998407155 ], [ -118.375665001408265, 34.094563999422434 ], [ -118.37531200180743, 34.094648999368616 ], [ -118.375141000737926, 34.094690999308739 ], [ -118.374720697607628, 34.094782291392583 ], [ -118.374676000552938, 34.094791998450781 ], [ -118.373895000981008, 34.094965998396589 ], [ -118.373196000461547, 34.095124999766817 ], [ -118.372702000791691, 34.095239999496265 ], [ -118.372271001450798, 34.095395999036008 ], [ -118.371851000614825, 34.095698998648835 ], [ -118.371627000703214, 34.095903998878455 ], [ -118.371484001783656, 34.096005999727794 ], [ -118.371325001412231, 34.096106998618353 ], [ -118.370919000853164, 34.096296999045791 ], [ -118.370332001698785, 34.096512998505055 ], [ -118.369927000954888, 34.09669599874141 ], [ -118.369763000399189, 34.096785998940831 ], [ -118.369382001853012, 34.096996998910186 ], [ -118.36890100106136, 34.097331999154896 ], [ -118.368676000833887, 34.097502998801943 ], [ -118.368519000761253, 34.09761299918388 ], [ -118.368301001404873, 34.097764998877658 ], [ -118.36818400089841, 34.097838999107317 ], [ -118.368144000290854, 34.097864998409719 ], [ -118.368102000970239, 34.097882998432141 ], [ -118.36799000118819, 34.097918999301861 ], [ -118.367973001328039, 34.097923999201548 ], [ -118.367838001172089, 34.097949999265282 ], [ -118.367709000274274, 34.097959999754366 ], [ -118.367444000942569, 34.097963999632483 ], [ -118.367141001457085, 34.097968999352531 ], [ -118.366719000351637, 34.097974999698721 ], [ -118.366453001436142, 34.097978999030055 ], [ -118.365622001886791, 34.097991999435528 ], [ -118.3653460011475, 34.097995998456327 ], [ -118.365039001772828, 34.098000999371216 ], [ -118.364464000897613, 34.098009999096114 ], [ -118.364280000818624, 34.098011998881596 ], [ -118.363010001823838, 34.098031999260726 ], [ -118.362860001464455, 34.098033998842119 ], [ -118.362216000339785, 34.0980439984152 ], [ -118.361556000367173, 34.098053998816226 ], [ -118.360994000742807, 34.098062999397172 ], [ -118.360360001549964, 34.098069999041492 ], [ -118.359270001760052, 34.098065999382449 ], [ -118.358179001604796, 34.098058998938576 ], [ -118.357089000287019, 34.098050999443956 ], [ -118.356103001022305, 34.098044999428154 ], [ -118.355013001854758, 34.098036999490319 ], [ -118.353923000400783, 34.098029998485501 ], [ -118.352832001372491, 34.098022999002715 ], [ -118.351742001238563, 34.098014999106482 ], [ -118.350997000654274, 34.098009998775396 ], [ -118.350655000653248, 34.098007999279808 ], [ -118.350034001070824, 34.098003999195235 ], [ -118.349561001333299, 34.097999999757263 ], [ -118.348957001761917, 34.097995998416835 ], [ -118.348345001230527, 34.097991998834559 ], [ -118.347866000399478, 34.097988999124446 ], [ -118.34706600030583, 34.097982998916756 ], [ -118.346776001372191, 34.097980999449923 ], [ -118.346258001767268, 34.097977999768304 ], [ -118.345567001782328, 34.097972999721208 ], [ -118.345197001035061, 34.097970998732265 ], [ -118.344119001608917, 34.097962998490459 ], [ -118.342502001798479, 34.097965998919506 ], [ -118.341558001321147, 34.097967998646283 ], [ -118.341370001558488, 34.097967999539435 ], [ -118.340484000524611, 34.097969998639542 ], [ -118.338658001344641, 34.097972998953431 ], [ -118.338021000702554, 34.09797399903654 ], [ -118.337558001813832, 34.097974999377314 ], [ -118.336582000522952, 34.097976998975589 ], [ -118.336310000915446, 34.097976999448349 ], [ -118.335284001191667, 34.097978999688273 ], [ -118.333791001173793, 34.097981999446382 ], [ -118.333211000467884, 34.097982999590336 ], [ -118.33245600189872, 34.097983998827999 ], [ -118.332198000307713, 34.097983999362533 ], [ -118.331560000728658, 34.0979859993978 ], [ -118.331013000254444, 34.097986999728086 ], [ -118.330283000885558, 34.097987998498773 ], [ -118.329509001764023, 34.097988998899623 ], [ -118.328810000268376, 34.097989998495045 ], [ -118.327746001051906, 34.097991998735203 ], [ -118.326655001932778, 34.097993999291837 ], [ -118.325148001722127, 34.098002999529463 ], [ -118.323719000757933, 34.098011998532918 ], [ -118.322292001930464, 34.098020999212061 ], [ -118.321517001577135, 34.098025998779896 ], [ -118.321186000520626, 34.098027999016857 ], [ -118.320540000438328, 34.098031999340975 ], [ -118.320111001917923, 34.098034999420527 ], [ -118.319709001137909, 34.09803699938692 ], [ -118.319054000411967, 34.09804099869833 ], [ -118.317958000297807, 34.098047998820661 ], [ -118.315777000847262, 34.098061999579819 ], [ -118.314760000631367, 34.098067998841294 ], [ -118.314638001699606, 34.098068998946772 ], [ -118.314596000908665, 34.098068998572032 ], [ -118.314491001853142, 34.098069999286615 ], [ -118.314374000390686, 34.098070998780024 ], [ -118.314248001402518, 34.098070998734812 ], [ -118.314028001554448, 34.098072998731368 ], [ -118.313613000321439, 34.098074999540231 ], [ -118.311442001448171, 34.098088998793592 ], [ -118.310960000419371, 34.098091998876356 ], [ -118.309239001225521, 34.098102998736792 ], [ -118.307063001104751, 34.098107999609454 ], [ -118.305622001625167, 34.098110998883605 ], [ -118.30434000164361, 34.098114998755698 ], [ -118.303144001696822, 34.098116999391856 ], [ -118.302151001029998, 34.098119998780426 ], [ -118.300515001871844, 34.098123998644873 ], [ -118.299419000640626, 34.098126999574099 ], [ -118.298324000735334, 34.098130999660036 ], [ -118.297228001263491, 34.098134999315661 ], [ -118.296121000506162, 34.098138999108819 ], [ -118.295023001758253, 34.098141998823259 ], [ -118.293928001586011, 34.098145998463572 ], [ -118.29287200185108, 34.098148998856551 ], [ -118.291758000991848, 34.098152999560426 ], [ -118.289578001664538, 34.098157999086695 ], [ -118.288481000444946, 34.098160998864039 ]]

   	var sunsetLine = turf.lineString(sunset);
   	var length = turf.length(sunsetLine);
   	var point = L.circleMarker([ 34.090472998862033 ,-118.392298000351204],{ radius: 6, stroke: false, fillOpacity: 1, fillColor: 'orange'}).addTo(map);
   	var sunsetDrawn = L.geoJson(sunsetLine,{color: 'red'}).addTo(map);

   	map.on('click',updateNearest);

   	function updateNearest(event) {
   		var p = turf.point([event.latlng.lng,event.latlng.lat]);
   		var nearest = turf.nearestPointOnLine(sunsetLine,p);
   		point.setLatLng([turf.getCoord(nearest)[1],turf.getCoord(nearest)[0]]);
   		var index = nearest.properties.location / length;
   		$('#index-text').val(index);
   		$('#copyable-text').val(index);
   	}

  	$('#copy').click(function(){ var ct = document.getElementById("index-text"); ct.select(); document.execCommand("copy"); });

   	


   </script>
  </body>
</html>